<html>

<head>
  <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: blob:; child-src *; connect-src 'self' https: ws://localhost.airbnb.com:8888 wss: *.amap.com *.inspectlet.com; font-src 'self' data: *.muscache.com fonts.gstatic.com use.typekit.net; img-src 'self' https: data: *.inspectlet.com; media-src 'self' https:; script-src 'self' 'unsafe-eval' 'nonce-123456' a0.muscache.com cdn.siftscience.com ss.musthird.com t1.musthird.com bat.bing.com connect.facebook.net www.google-analytics.com www.googleadservices.com tpc.googlesyndication.com www.googletagmanager.com a.cdn.intentmedia.net maps.googleapis.com ajax.googleapis.com *.g.doubleclick.net www.google.com www.gstatic.com app.link cdn.branch.io jgilhuly.github.io bam.nr-data.net js-agent.newrelic.com sslwidget.criteo.com static.criteo.net dis.criteo.com widget.us.criteo.com *.gbc.criteo.net ethn.io s.yimg.jp api.geetest.com webpack.localhost.airbnb.com blob: webapi.amap.com restapi.amap.com *.inspectlet.com 'sha256-zND1XZk+UGBZgw2vsN94f0JltwefFfx4ZTOo8T7hKxE=' 'unsafe-inline' 'sha256-VjgI+lsDZsfgpvHSfXTuwEyvgtv9HRUUBMH8oPuoB2g=' 'sha256-D9Mz5Ys1Opv52C2fjJU4eS9qDZpG9+Ywz5rQPUyxngQ='; style-src 'self' 'unsafe-inline'; report-uri /tracking/csp?action=mc_index&controller=magic_carpet_landing_page&report_only=false&req_uuid=14a52ce5-301e-43fa-84ec-a7478dc993c7&version=Unknown"> -->

  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: blob:; child-src *; frame-src 'self' 'nonce-123456'; connect-src 'self' https: ws://localhost.airbnb.com:8888 wss: *.amap.com *.inspectlet.com; font-src 'self' data: *.muscache.com fonts.gstatic.com use.typekit.net; img-src 'self' https: data: *.inspectlet.com; media-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' 'nonce-123456' app.link cdn.branch.io jgilhuly.github.io; style-src 'self' 'nonce-123456';">

  <script type="text/javascript" nonce='123456'>

    (function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://jgilhuly.github.io/nonce-testing.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode banner closeBanner creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode".split(" "), 0);
    var branchKey = 'key_live_pbtE4dcavETgqI5C3M8n0eabADiL8rYZ';
    window.branch.init(branchKey, {
      'nonce': '123456',
      'no_journeys': true
    }, (err) => {
      console.log(err);
    });

    window.branch.setBranchViewData({
      data: {
        '$deeplink_path': '',
        '$fallback_url': 'airbnb.com',
      }
    });

    branch.deepview(
    {
        channel: 'facebook',
        data: {
            mydata: 'content of my data',
            foo: 'bar',
            '$deeplink_path': 'item_id=12345'
        },
        feature: 'dashboard',
        stage: 'new user',
        tags: [ 'tag1', 'tag2' ],
    },
    {
        make_new_link: true,
        open_app: true
    },
    function(err) {
        console.log(err || 'no error');
    });

    var commerce_data = {
      "revenue": 50.0,
      "currency": "USD",
      "transaction_id": "foo-transaction-id",
      "shipping": 0.0,
      "tax": 5.0,
      "affiliation": "foo-affiliation",
      "products": [
           { "sku": "foo-sku-1", "name": "foo-item-1", "price": 45.00, "quantity": 1, "brand": "foo-brand",
             "category": "Electronics", "variant": "foo-variant-1"},
           { "sku": "foo-sku-2", "price": 2.50, "quantity": 2}
       ],
     };

    var metadata =  { "foo": "bar" };

    console.log(branch);

    branch.trackCommerceEvent('purchase', commerce_data, metadata, function(err) {
        if(err) {
             throw err;
        }
    });

    branch.banner({
      icon: 'http://icons.iconarchive.com/icons/wineass/ios7-redesign/512/Appstore-icon.png',
      title: 'Branch Demo App',
      description: 'The Branch demo app!',
      rating: 5,                              // Displays a star rating out of 5. Supports half stars through increments of .5
      reviewCount: 1500,                      // Amount of reviews your app has received next to the star rating
      openAppButtonText: 'Open',              // Text to show on button if the user has the app installed
      downloadAppButtonText: 'Download',      // Text to show on button if the user does not have the app installed
      sendLinkText: 'Send Link',              // Text to show on desktop button to allow users to text themselves the app
      phonePreviewText: '+44 9999-9999',      // The default phone placeholder is a US format number, localize the placeholder number with a custom placeholder with this option
      showiOS: true,                          // Should the banner be shown on iOS devices (both iPhones and iPads)?
      showiPad: true,                         // Should the banner be shown on iPads (this overrides showiOS)?
      showAndroid: true,                      // Should the banner be shown on Android devices?
      showBlackberry: true,                   // Should the banner be shown on Blackberry devices?
      showWindowsPhone: true,                 // Should the banner be shown on Windows Phone devices?
      showKindle: true,                       // Should the banner be shown on Kindle devices?
      showDesktop: true,                      // Should the banner be shown on desktop devices?
      iframe: true,                           // Show banner in an iframe, recomended to isolate Branch banner CSS
      disableHide: false,                     // Should the user have the ability to hide the banner? (show's X on left side)
      forgetHide: false,                      // Should we show the banner after the user closes it? Can be set to true, or an integer to show again after X days
      respectDNT: false,                      // Should we skip showing the banner when a user's settings show 'Do Not Track'?
      mobileSticky: false,                    // Determines whether the mobile banner will be set `position: fixed;` (sticky) or `position: absolute;`, defaults to false *this property only applies when the banner position is 'top'
      desktopSticky: true,                    // Determines whether the desktop banner will be set `position: fixed;` (sticky) or `position: absolute;`, defaults to true *this property only applies when the banner position is 'top'
      make_new_link: false,                   // Should the banner create a new link, even if a link already exists?
      open_app: false,                        // Should the banner try to open the app passively (without the user actively clicking) on load?
    }, {
        tags: ['tag1', 'tag2'],
        feature: 'dashboard',
        stage: 'new user',
        data: {
            mydata: 'something',
            foo: 'bar',
            '$deeplink_path': 'open/item/1234'
        }
    });
  </script>
</head>

<body>
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent vulputate massa magna, vitae consequat lorem finibus a. Nulla eleifend quam a leo molestie, vitae tristique arcu faucibus. Pellentesque enim turpis, mattis ut metus a, consequat pharetra nulla. Vivamus elementum lorem sit amet porttitor aliquam. Pellentesque ornare ligula urna, vitae hendrerit nunc euismod vel. Integer id augue enim. Nunc sit amet arcu massa. Cras sem nulla, malesuada a metus eget, porttitor rhoncus magna. Phasellus pretium dolor sit amet consequat porttitor. Aliquam in purus ut sapien efficitur dignissim. Vivamus quis porta ex. Integer justo erat, cursus a accumsan non, laoreet ut sem. Cras a malesuada ante.
  Mauris in quam vestibulum, tincidunt dolor vitae, laoreet quam. Integer rhoncus sodales massa, vel consectetur sapien faucibus id. Donec convallis hendrerit velit, sodales volutpat lacus sodales vitae. Phasellus lobortis nec ligula id elementum. Ut euismod eros et ultricies pulvinar. Suspendisse vitae fringilla nulla. Nulla augue felis, dignissim et vestibulum quis, rhoncus nec turpis. Aenean sit amet semper mauris, eget porta lorem. Curabitur congue mattis nisi, ut placerat arcu dignissim at. Nunc neque elit, pharetra quis arcu egestas, posuere pulvinar tellus. Fusce a efficitur tellus, et egestas erat. Duis gravida eu nisl non posuere. Mauris vitae tincidunt sapien. Duis velit turpis, pulvinar id pulvinar a, varius id nunc.
  Mauris nisl mi, suscipit dictum enim eu, commodo venenatis nisl. Maecenas vitae ex sem. Maecenas accumsan luctus sapien, non ornare diam placerat et. Maecenas pulvinar posuere ligula sit amet tempor. Vivamus massa felis, ultrices eu bibendum nec, tristique et elit. Maecenas eu arcu quam. Proin dignissim sagittis risus, a sagittis orci rutrum ac. Mauris ultrices sit amet ante eu sollicitudin. Donec id leo interdum, aliquam nisl in, dapibus sapien. Ut vitae nibh erat. Proin faucibus porta nibh luctus venenatis. Nullam vitae pretium augue, ut efficitur eros. Vestibulum eu auctor quam. Nam eget nunc vel quam dignissim tincidunt.
  Cras at dignissim tortor, non feugiat purus. Maecenas volutpat nulla id metus placerat vehicula. Pellentesque libero risus, mattis sit amet urna id, scelerisque cursus massa. Praesent venenatis orci a nisi interdum, at hendrerit felis ullamcorper. Quisque eget justo mattis, rutrum lacus vel, euismod odio. Ut tincidunt arcu sit amet tincidunt laoreet. Ut ac nunc sed eros luctus fermentum non eget nibh. Ut aliquet dolor vitae egestas varius.
  Ut commodo et nibh ac ultricies. Etiam mattis eleifend diam, eu sagittis ligula malesuada in. In id aliquam libero, ut scelerisque massa. Integer eu tincidunt diam. Duis luctus magna purus, eu placerat massa laoreet eu. Etiam fermentum quis lorem id congue. Maecenas commodo massa sed hendrerit egestas. Vestibulum sodales est arcu, ac maximus nibh maximus sed.</p>
</body>

</html>
